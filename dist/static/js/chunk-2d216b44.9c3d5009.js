(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216b44"],{c430:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container",staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[n("h1",{staticStyle:{"align-self":"center"}},[t._v("已结束任务列表")]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"auto"},attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"设备ID",prop:"deviceId",width:"65"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"AIX任务ID",prop:"taskId",width:"75"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态",prop:"status",width:"110"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"开始时间",prop:"begin",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"结束时间",prop:"end",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"持续时长(分钟)",prop:"durationMin",width:"90"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"任务日志",prop:"logs",width:"500","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"205"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{on:{click:function(n){return t.deleteById(e.row.id)}}},[t._v("删除")]),t._v(" "),n("el-button",{on:{click:function(n){return t.showLog(e.row.logs)}}},[t._v("日志")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.totalCount},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"任务日志",visible:t.dialogVisible,width:"1500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-input",{staticStyle:{width:"100%","font-size":"17px"},attrs:{type:"textarea",wrap:"off",readonly:"true",resize:"none",autosize:{minRows:1,maxRows:26}},model:{value:t.logs,callback:function(e){t.logs=e},expression:"logs"}})],1)],1)},i=[],l=n("b775"),o="/aix/finished_task";function r(){return Object(l["a"])({url:o+"/count",method:"get"})}function s(t,e){return Object(l["a"])({url:o+"/page",params:{page:t,countPerPage:e},method:"get"})}function c(t){return Object(l["a"])({url:o+"/delete",data:{id:t},method:"post"})}var u={data:function(){return{list:null,listLoading:!0,totalCount:0,pageSize:9,currentPage:1,logs:"",dialogVisible:!1}},methods:{deleteById:function(t){var e=this;this.$confirm("确认删除？").then((function(n){c(t).then((function(t){e.$message({message:"删除成功",type:"success"}),e.refreshPage()}))})).catch((function(t){}))},showLog:function(t){this.dialogVisible=!0,this.logs=t},handleCurrentChange:function(t){this.currentPage=t,this.refreshPage()},refreshPage:function(){var t=this;r().then((function(e){t.totalCount=e.data})),s(this.currentPage,this.pageSize).then((function(e){t.list=e.data,t.listLoading=!1}))}},created:function(){var t=this;this.listLoading=!0,r().then((function(e){t.totalCount=e.data})),s(1,this.pageSize).then((function(e){t.list=e.data,t.listLoading=!1}))}},d=u,g=n("2877"),h=Object(g["a"])(d,a,i,!1,null,"7ec70a27",null);e["default"]=h.exports}}]);