(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3de81918"],{"90fe":function(t,e,n){"use strict";n.r(e);var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("h1",[t._v("Client列表")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.fetchData}},[t._v("立即刷新")]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,width:"100%","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"名称",prop:"name",width:"95"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"描述",prop:"info",width:"195"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建用户",prop:"userId",width:"95"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"活动时间",prop:"since",width:"195"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"GPU驱动版本",prop:"gpuInfo.driverVersion",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"CUDA版本",prop:"gpuInfo.cudaVersion",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"GPU数量",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"right",width:"100%",trigger:"hover"}},[n("el-table",{attrs:{data:e.row.gpuInfo.gpus}},[n("el-table-column",{attrs:{prop:"id",label:"编号",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"型号",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{prop:"temperature",label:"温度",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"powerDraw",label:"当前功率",width:"99"}}),t._v(" "),n("el-table-column",{attrs:{prop:"powerLimit",label:"最大功率",width:"99"}}),t._v(" "),n("el-table-column",{attrs:{prop:"memUsed",label:"已用显存",width:"99"}}),t._v(" "),n("el-table-column",{attrs:{prop:"memAll",label:"显存总量",width:"99"}})],1),t._v(" "),n("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.gpuInfo.gpuNum))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"当前任务",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"right",width:"100%",trigger:"hover"}},[n("el-table",{attrs:{data:e.row.taskBriefInfoList}},[n("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"accessType",label:"权限",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"info",label:"简介",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",width:"230"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"}})],1),t._v(" "),n("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.firstTaskName))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"详情",width:"105"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.jumpToManageDialog(e.row)}}},[t._v("管理")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:t.dialogDeviceInfo.name,visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{"margin-right":"5px","font-size":"17px"}},[t._v("Token:")]),t._v(" "),n("div",[n("span",{staticStyle:{"font-size":"17px",color:"darkred","margin-right":"20px"}},[t._v(t._s(t.dialogDeviceInfo.token))])]),t._v(" "),n("div",[n("el-link",{staticClass:"copyBtn",staticStyle:{"font-size":"17px"},attrs:{"data-clipboard-text":t.dialogDeviceInfo.token}},[t._v("复制")])],1)]),t._v(" "),n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{"margin-right":"5px","font-size":"17px"}},[t._v("执行指令:")]),t._v(" "),n("div",{staticStyle:{width:"60%","font-size":"17px",color:"darkred","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(t.dialogDeviceInfo.runningCmds)+"\n      ")])]),t._v(" "),n("h3",[t._v("任务详情")]),t._v(" "),n("el-table",{attrs:{data:t.dialogDeviceInfo.taskBriefInfoList}},[n("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"accessType",label:"权限",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"info",label:"简介",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",width:"230"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"}})],1),t._v(" "),t.dialogDeviceInfo.taskBriefInfoList.length>0?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.stopTask(t.dialogDeviceInfo.token)}}},[t._v("\n      终止任务\n    ")]):t._e(),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},i=[],a=n("cd00"),o=n("b311"),r=n.n(o),s={filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,autoRefreshTimer:null,closeWaitingTimer:null,dialogVisible:!1,dialogDeviceInfo:{name:"unknown",runningCmds:"N/A",taskBriefInfoList:[]},listLoading:!0}},created:function(){var t=this;this.clearTimer(),this.setTimer(),this.listLoading=!0,a["e"]().then((function(e){t.list=e.data.items,t.listLoading=!1}));var e=this,n=new r.a(".copyBtn");n.on("success",(function(t){console.info("Action:",t.action),console.info("Text:",t.text),console.info("Trigger:",t.trigger),e.copySuccess(),t.clearSelection()}))},destroyed:function(){this.clearTimer()},methods:{fetchData:function(){var t=this;a["e"]().then((function(e){t.list=e.data.items}))},setTimer:function(){var t=this;null===this.autoRefreshTimer&&(this.autoRefreshTimer=setInterval((function(){t.fetchData()}),1e4))},clearTimer:function(){clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=null},jumpToManageDialog:function(t){this.dialogVisible=!0,this.dialogDeviceInfo=t},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},stopTask:function(t){var e=this;this.$confirm("确认终止？").then((function(n){a["h"](t),e.fullScreenWaiting(t)})).catch((function(t){}))},fullScreenWaiting:function(t){var e=this,n=this.$loading({lock:!0,text:"正在停止，请稍后...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});null===this.closeWaitingTimer&&(this.closeWaitingTimer=setInterval((function(){var l;a["f"](t).then((function(t){l=t.data,null===l&&(e.fetchData(),e.dialogDeviceInfo.runningCmds="",e.dialogDeviceInfo.taskBriefInfoList=[],n.close(),clearInterval(e.closeWaitingTimer),e.closeWaitingTimer=null,e.$message({message:"任务已停止",type:"success"}))}))}),2e3))},copySuccess:function(){this.$message({message:"复制成功",type:"success"})}}},c=s,u=n("2877"),d=Object(u["a"])(c,l,i,!1,null,null,null);e["default"]=d.exports},cd00:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"h",(function(){return p}));var l=n("b775"),i=(n("4328"),"/aix/client");function a(){return Object(l["a"])({url:i+"/active_num",method:"get"})}function o(){return Object(l["a"])({url:i+"/online_num",method:"get"})}function r(){return Object(l["a"])({url:i+"/list",method:"get"})}function s(t){return Object(l["a"])({url:i+"/task-info",params:{token:t},method:"get"})}function c(t){return Object(l["a"])({url:i+"/log/start",params:{token:t},method:"get"})}function u(t){return Object(l["a"])({url:i+"/log/stop",params:{token:t},method:"get"})}function d(){return Object(l["a"])({url:i+"/log/line",method:"get"})}function p(t){return l["a"].post(i+"/task",{token:t,action:"stop"})}}}]);