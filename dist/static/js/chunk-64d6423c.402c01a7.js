(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64d6423c"],{3672:function(t,e,n){"use strict";var i=n("ed6a"),o=n.n(i);o.a},9406:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-container"},[n("div",{staticClass:"dashboard-text"},[t._v("User: "+t._s(t.name))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.changeConnectState}},[t._v(t._s(t.connectBtnStr))]),t._v(" "),n("div",{staticClass:"dashboard-aix-test"},[t._v("Active Client Num: "+t._s(t.activeClientNum))]),t._v(" "),n("div",{staticClass:"dashboard-aix-test"},[t._v("Online Client Num: "+t._s(t.onlineClientNum))]),t._v(" "),n("br"),t._v(" "),n("div",{attrs:{display:"flex"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.changeLogState}},[t._v(t._s(t.logBtnStr))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.jumpToELK}},[t._v("日志管理")])],1),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.showLog,expression:"showLog"}],staticClass:"infinite-list",staticStyle:{width:"95%",height:"550px",overflow:"auto","white-space":"pre-wrap"},attrs:{id:"logArea"}},t._l(t.logStr,(function(e){return n("li",{key:e,staticClass:"infinite-list-item"},[t._v(t._s(e))])})),0)],1)},o=[],r=n("5530"),a=n("2f62"),c=n("cd00"),s=n("b775"),l="/aix/server";function u(){return Object(s["a"])({url:l+"/log/start",method:"get"})}function h(){return Object(s["a"])({url:l+"/log/stop",method:"get"})}function d(){return Object(s["a"])({url:l+"/log/line",method:"get"})}var m={name:"Dashboard",data:function(){return{activeClientNum:0,onlineClientNum:0,connected:!1,connectBtnStr:"点击连接AIX服务器",logBtnStr:"显示服务器日志",showLog:!1,logStr:[]}},computed:Object(r["a"])({},Object(a["b"])(["name"])),methods:{changeLogState:function(){this.connected?this.showLog?(h(),this.logBtnStr="显示服务器日志",this.logStr=[],this.showLog=!1):(u(),this.logBtnStr="关闭日志",this.showLog=!0):this.$message("请先连接服务器!")},changeConnectState:function(){this.connected?(this.clearTimer(),this.showLog&&(h(),this.logBtnStr="显示服务器日志",this.logStr=[],this.showLog=!1),this.connectBtnStr="点击连接AIX服务器",this.activeClientNum=0,this.onlineClientNum=0,this.connected=!1):(this.setTimer(),this.connectBtnStr="点击断开服务器",this.connected=!0)},jumpToELK:function(){window.location.href="http://10.214.211.205:5601/app/logs"},getActiveClientNum:function(){var t=this;c["d"]().then((function(e){t.activeClientNum=e.data}))},getOnlineClientNum:function(){var t=this;c["f"]().then((function(e){t.onlineClientNum=e.data}))},loadLog:function(){var t=this;d().then((function(e){null!==e.data&&""!==e.data&&t.logStr.push(e.data)}))},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.showLog&&t.loadLog(),t.getActiveClientNum(),t.getOnlineClientNum();var e=document.getElementById("logArea");e.scrollTop=e.scrollHeight}),3e3))},clearTimer:function(){clearInterval(this.timer),this.timer=null}},created:function(){this.clearTimer()},destroyed:function(){this.clearTimer()}},g=m,f=(n("3672"),n("2877")),v=Object(f["a"])(g,i,o,!1,null,"e615e97a",null);e["default"]=v.exports},cd00:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return u}));var i=n("b775"),o="/aix/client";function r(){return Object(i["a"])({url:o+"/active_num",method:"get"})}function a(){return Object(i["a"])({url:o+"/online_num",method:"get"})}function c(){return Object(i["a"])({url:o+"/list",method:"get"})}function s(t){return Object(i["a"])({url:o+"/log/start",params:{token:t},method:"get"})}function l(t){return Object(i["a"])({url:o+"/log/stop",params:{token:t},method:"get"})}function u(){return Object(i["a"])({url:o+"/log/line",method:"get"})}},ed6a:function(t,e,n){}}]);